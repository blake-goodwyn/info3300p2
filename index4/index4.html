<!DOCTYPE html>
<style>
body {
  background-color: #39414d;
}
text {
  font: 14px "Helvetica Neue", Helvetica, Arial, sans-serif;
  text-anchor: middle;
  pointer-events: none;
}

circle {
  fill: #ccc;
}
h1{
  color: #1c5aab;
  padding-top: 1%;
}
.node:hover circle {
  fill: orange;}

img {
width: 110px;
height: 160px;
float: left;
top: 0px;
padding: 5px;
}
svg g{
  padding-top: 300px;
  margin-top: -10%;
  float: right;

}
#header{
  background-color: #ffdd1e;
  height: 60px;
  margin-top: -1.5%;
  width: 100%;
}

.d3-tip {
  line-height: 1;
  /*font-weight: bold;*/
  padding: 12px;
  background: rgba(0, 0, 0, 0.8);
  color: #fff;
  border-radius: 2px;
  width: 10%;
  font-size: 12px;
}

/* Creates a small triangle extender for the tooltip */
.d3-tip:after {
  box-sizing: border-box;
  display: inline;
  font-size: 10px;
  width: 100%;
  line-height: 1;
  color: rgba(0, 0, 0, 0.8);
  content: "\25BC";
  position: absolute;
  text-align: center;
}

/* Style northward tooltips differently */
.d3-tip.n:after {
  margin: -1px 0 0 0;
  top: 100%;
  left: 0;
}
strong{
  color: yellow;
}
</style>
<body>
<div data-role="page" id="header">
  <div data-role="header" data-position="fixed">
    <h1 align="center">Which Oscar Movie Best Describes You?</h1>
  </div>
<div id = "ques"></div>
<div class="example_div"></div>
<script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.16/d3.min.js"></script>
<script src="//d3js.org/queue.v1.min.js"></script>
<script src="//labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
<script>

var README = null;
var images = null;

fileRead();
console.log(images)
quizVis();

function fileRead(){
  d3.csv('images.csv', function(data){
    console.log(data)
    images.push(data)
  });
};

function quizVis(){

  var bleed = 100,
      width = 560,
      height = 560,
      height1=950,
      width1=2000;

  var pack = d3.layout.pack()
      .sort(null)
      .size([width, height + bleed * 2])
      .padding(2);

  var svg1 = d3.select("body").append("svg")
      .attr("width", width)
      .attr("height", height)
    .append("g")
      .attr("transform", "translate(0," + -bleed + ")");

  drawCircles();

  function drawCircles(error, json, images) {
    var chars = {};
    images.forEach(function(d) {
      chars[d.name] = {};
      chars[d.name].url = d.url;
      chars[d.name].personal = d.personal;
    });
    if (error) throw error;

    var tip = d3.tip()
    .attr('class', 'd3-tip')
    .offset([-10, 0])
    .html(function(d) {
      return "<strong>FILM SYNOPSIS:</strong> <span style='color:white'>" + chars[d.name].personal + "</span>" +"<img src="+ chars[d.name].url+">" + "</img>";
    })

    var node = svg1.selectAll(".node")
        .data(pack.nodes(flatten(json))
          .filter(function(d) { return !d.children; }))
      .enter().append("g")
        .attr("id", function(d,i) { return "circle-"+i; })
        .attr("class", function(d) {
          if (["Brooklyn","Spotlight"].indexOf(d.name) != -1) {
            return "sport";
          }
          /*else if(["Yax", "Finnick", "Fru Fru"].indexOf(d.name) != -1) {
            return "sport1";
          };*/
        })

        .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });

    node.call(tip);


    node.append("circle")
        .attr("r", function(d) { return d.r; }).style("opacity",0.5)
        .on('mouseover', tip.show)
        .on('mouseout', tip.hide);

    node.append("text")
        .text(function(d) { return d.name; })
        //.style("font-size", function(d) { return Math.min(2 * d.r, (2 * d.r - 8) / this.getComputedTextLength() * 14); })
        .attr("dy", ".35em")
        .attr("fill","white");

   
   /* node.append("svg:image")
    .attr("xlink:href", function(d) { 
      if(chars.hasOwnProperty(d.name)) {
        return chars[d.name].url;
      }

    })
   .attr("height",50).attr("width",50).attr("y", -10);
  */
  };  
     
  function flatten(root) {
    var nodes = [];

    function recurse(node) {
      if (node.children) node.children.forEach(recurse);
      else nodes.push({name: node.name, value: node.size});
    }

    recurse(root);
    return {children: nodes};
  }

  var svg = d3.select("#ques").append("svg")
      .attr("width", width1)
      .attr("height", height1)
      .attr("x","1000")
      .attr("y","30");
  //Q1

  svg.append("text").attr("x","50%").attr("y",30).style("fill","yellow").text("Question1: Your life is");
  svg.append("text").attr("x","50%").attr("y",50).style("fill","yellow").text("A: a constant struggle against a harsh world.");
  svg.append("text").attr("x","50%").attr("y",65).style("fill","yellow").text("B: a gorgeous journey towards self-acceptance.");
  svg.append("text").attr("x","50%").attr("y",80).style("fill","yellow").text("C: a quest to succeed against a system trying to tear you down.");
  svg.append("text").attr("x","50%").attr("y",95).style("fill","yellow").text("D: real real small.");

  svg.append("circle").attr("cx","62%").attr("cy",50).style("fill","white").attr("r",5)
    .on("click", function() { 
      var currSize = d3.selectAll(".sport text").style("font-size");
      currSize = parseInt(currSize.substring(0,currSize.length-2));
      d3.selectAll(".sport text").style("font-size", function() { return currSize + 10; }) 
    });
  svg.append("circle").attr("cx","62%").attr("cy",65).style("fill","white").attr("r",5).on("click", function() { 
      var currSize = d3.selectAll(".sport text").style("font-size");
      currSize = parseInt(currSize.substring(0,currSize.length-2));
      d3.selectAll(".sport text").style("font-size", function() { return currSize + 20; }) 
    });
  svg.append("circle").attr("cx","62%").attr("cy",80).style("fill","white").attr("r",5)
    .on("click", function() { 
      var currSize = d3.selectAll(".sport text").style("font-size");
      currSize = parseInt(currSize.substring(0,currSize.length-2));
      d3.selectAll(".sport text").style("font-size", function() { return currSize + 20; }) 
    });
  svg.append("circle").attr("cx","62%").attr("cy",95).style("fill","white").attr("r",5).on("click", function() { 
      var currSize = d3.selectAll(".sport text").style("font-size");
      currSize = parseInt(currSize.substring(0,currSize.length-2));
      d3.selectAll(".sport text").style("font-size", function() { return currSize + 20; }) 
    });

  //Q2
  svg.append("text").attr("x","50%").attr("y",130).style("fill","yellow").text("Question2:Right now your outfit is");
  svg.append("text").attr("x","50%").attr("y",150).style("fill","yellow").text("A: at least 50% blood and dirt.");
  svg.append("text").attr("x","50%").attr("y",165).style("fill","yellow").text("B: one of the few means of self-expression available to you.");
  svg.append("text").attr("x","50%").attr("y",180).style("fill","yellow").text("C: the uniform expected of you.");
  svg.append("text").attr("x","50%").attr("y",195).style("fill","yellow").text("D: not what you would have picked out for yourself.");

  svg.append("circle").attr("cx","62%").attr("cy",150).style("fill","white").attr("r",5)
    .on("click", function() { 
      var currSize = d3.selectAll(".sport text").style("font-size");
      currSize = parseInt(currSize.substring(0,currSize.length-2));
      d3.selectAll(".sport text").style("font-size", function() { return currSize + 20; }) 
    });
  svg.append("circle").attr("cx","62%").attr("cy",165).style("fill","white").attr("r",5).on("click", function() { 
      var currSize = d3.selectAll(".sport text").style("font-size");
      currSize = parseInt(currSize.substring(0,currSize.length-2));
      d3.selectAll(".sport text").style("font-size", function() { return currSize + 20; }) 
    });
  svg.append("circle").attr("cx","62%").attr("cy",180).style("fill","white").attr("r",5)
    .on("click", function() { 
      var currSize = d3.selectAll(".sport text").style("font-size");
      currSize = parseInt(currSize.substring(0,currSize.length-2));
      d3.selectAll(".sport text").style("font-size", function() { return currSize + 20; }) 
    });
  svg.append("circle").attr("cx","62%").attr("cy",195).style("fill","white").attr("r",5).on("click", function() { 
      var currSize = d3.selectAll(".sport text").style("font-size");
      currSize = parseInt(currSize.substring(0,currSize.length-2));
      d3.selectAll(".sport text").style("font-size", function() { return currSize + 20; }) 
    });

  //Q3
  svg.append("text").attr("x","50%").attr("y",230).style("fill","yellow").text("Question3:Happiness is");
  svg.append("text").attr("x","50%").attr("y",250).style("fill","yellow").text("A: a warm gun.");
  svg.append("text").attr("x","50%").attr("y",265).style("fill","yellow").text("B: the arms of your beloved.");
  svg.append("text").attr("x","50%").attr("y",280).style("fill","yellow").text("C: large, comforting stacks of money.");
  svg.append("text").attr("x","50%").attr("y",295).style("fill","yellow").text("D: freedom.");

  svg.append("circle").attr("cx","62%").attr("cy",250).style("fill","white").attr("r",5)
    .on("click", function() { 
      var currSize = d3.selectAll(".sport text").style("font-size");
      currSize = parseInt(currSize.substring(0,currSize.length-2));
      d3.selectAll(".sport text").style("font-size", function() { return currSize + 20; }) 
    });
  svg.append("circle").attr("cx","62%").attr("cy",265).style("fill","white").attr("r",5).on("click", function() { 
      var currSize = d3.selectAll(".sport text").style("font-size");
      currSize = parseInt(currSize.substring(0,currSize.length-2));
      d3.selectAll(".sport text").style("font-size", function() { return currSize + 20; }) 
    });
  svg.append("circle").attr("cx","62%").attr("cy",280).style("fill","white").attr("r",5)
    .on("click", function() { 
      var currSize = d3.selectAll(".sport text").style("font-size");
      currSize = parseInt(currSize.substring(0,currSize.length-2));
      d3.selectAll(".sport text").style("font-size", function() { return currSize + 20; }) 
    });
  svg.append("circle").attr("cx","62%").attr("cy",295).style("fill","white").attr("r",5).on("click", function() { 
      var currSize = d3.selectAll(".sport text").style("font-size");
      currSize = parseInt(currSize.substring(0,currSize.length-2));
      d3.selectAll(".sport text").style("font-size", function() { return currSize + 20; }) 
    });
  //Q4
  svg.append("text").attr("x","50%").attr("y",330).style("fill","yellow").text("Question4:Your favorite subject is");
  svg.append("text").attr("x","50%").attr("y",350).style("fill","yellow").text("A: physical education.");
  svg.append("text").attr("x","50%").attr("y",365).style("fill","yellow").text("B: art.");
  svg.append("text").attr("x","50%").attr("y",380).style("fill","yellow").text("C: math.");
  svg.append("text").attr("x","50%").attr("y",395).style("fill","yellow").text("D: Room.");

  svg.append("circle").attr("cx","62%").attr("cy",350).style("fill","white").attr("r",5)
    .on("click", function() { 
      var currSize = d3.selectAll(".sport text").style("font-size");
      currSize = parseInt(currSize.substring(0,currSize.length-2));
      d3.selectAll(".sport text").style("font-size", function() { return currSize + 20; }) 
    });
  svg.append("circle").attr("cx","62%").attr("cy",365).style("fill","white").attr("r",5).on("click", function() { 
      var currSize = d3.selectAll(".sport text").style("font-size");
      currSize = parseInt(currSize.substring(0,currSize.length-2));
      d3.selectAll(".sport text").style("font-size", function() { return currSize + 20; }) 
    });
  svg.append("circle").attr("cx","62%").attr("cy",380).style("fill","white").attr("r",5)
    .on("click", function() { 
      var currSize = d3.selectAll(".sport text").style("font-size");
      currSize = parseInt(currSize.substring(0,currSize.length-2));
      d3.selectAll(".sport text").style("font-size", function() { return currSize + 20; }) 
    });
  svg.append("circle").attr("cx","62%").attr("cy",395).style("fill","white").attr("r",5).on("click", function() { 
      var currSize = d3.selectAll(".sport text").style("font-size");
      currSize = parseInt(currSize.substring(0,currSize.length-2));
      d3.selectAll(".sport text").style("font-size", function() { return currSize + 20; }) 
    });
  //Q5
  svg.append("text").attr("x","50%").attr("y",430).style("fill","yellow").text("Question5:Your ideal vacation would be");
  svg.append("text").attr("x","50%").attr("y",450).style("fill","yellow").text("A: someplace safe. Like a cave, maybe.");
  svg.append("text").attr("x","50%").attr("y",465).style("fill","yellow").text("B: Paris and only Paris.");
  svg.append("text").attr("x","50%").attr("y",480).style("fill","yellow").text("C: vacations are for quitters.");
  svg.append("text").attr("x","50%").attr("y",495).style("fill","yellow").text("D: not Room.");

  svg.append("circle").attr("cx","62%").attr("cy",450).style("fill","white").attr("r",5)
    .on("click", function() { 
      var currSize = d3.selectAll(".sport text").style("font-size");
      currSize = parseInt(currSize.substring(0,currSize.length-2));
      d3.selectAll(".sport text").style("font-size", function() { return currSize + 20; }) 
    });
  svg.append("circle").attr("cx","62%").attr("cy",465).style("fill","white").attr("r",5).on("click", function() { 
      var currSize = d3.selectAll(".sport text").style("font-size");
      currSize = parseInt(currSize.substring(0,currSize.length-2));
      d3.selectAll(".sport text").style("font-size", function() { return currSize + 20; }) 
    });
  svg.append("circle").attr("cx","62%").attr("cy",480).style("fill","white").attr("r",5)
    .on("click", function() { 
      var currSize = d3.selectAll(".sport text").style("font-size");
      currSize = parseInt(currSize.substring(0,currSize.length-2));
      d3.selectAll(".sport text").style("font-size", function() { return currSize + 20; }) 
    });
  svg.append("circle").attr("cx","62%").attr("cy",495).style("fill","white").attr("r",5).on("click", function() { 
      var currSize = d3.selectAll(".sport text").style("font-size");
      currSize = parseInt(currSize.substring(0,currSize.length-2));
      d3.selectAll(".sport text").style("font-size", function() { return currSize + 20; }) 
    });
};

</script>